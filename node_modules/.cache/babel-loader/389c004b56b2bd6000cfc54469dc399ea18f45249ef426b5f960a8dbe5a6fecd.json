{"ast":null,"code":"import{useParams}from\"react-router-dom\";import{useEffect,useState}from\"react\";import{FaPlay}from\"react-icons/fa\";import LinkButton from\"./LinkButton\";import{useWatchlist}from\"../context/WatchlistContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const KEY=\"ef5bebce\";function MovieDetailPage(){const{id}=useParams();const[movie,setMovie]=useState(null);const[error,setError]=useState(\"\");const[isLoading,setIsLoading]=useState(true);const{addToWatchlist}=useWatchlist();useEffect(()=>{const controller=new AbortController();async function fetchMovie(){try{setIsLoading(true);setError(\"\");const res=await fetch(`http://www.omdbapi.com/?i=${id}&apikey=${KEY}`,{signal:controller.signal});if(!res.ok)throw new Error(\"Something went wrong with fetching movies\");const data=await res.json();if(data.Response===\"False\")throw new Error(data.Error);setMovie(data);}catch(err){if(err.name!==\"AbortError\"){setError(err.message);}}finally{setIsLoading(false);}}fetchMovie();return()=>{controller.abort();};},[id]);if(isLoading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error]});if(!movie)return/*#__PURE__*/_jsx(\"p\",{children:\"Movie is loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-2/3 gap-4 text-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-[400px] h-[340px]\",children:[/*#__PURE__*/_jsx(\"img\",{src:movie.Poster,alt:`${movie.Title} poster`,className:\"w-full object-cover min-w-full min-h-full h-full\"}),/*#__PURE__*/_jsx(\"button\",{className:\"absolute inset-0 flex items-center justify-center text-white opacity-0 hover:opacity-100 transition-opacity bg-black bg-opacity-50\",\"aria-label\":\"Play\",children:/*#__PURE__*/_jsx(FaPlay,{size:30})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl text-yellow \",children:movie.Title}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-bold text-xl pb-6\",children:[\"\\uD83C\\uDFAC \",movie.Year]}),movie.imdbRating===\"N/A\"?null:/*#__PURE__*/_jsxs(\"p\",{className:\"font-bold text-xl\",children:[\" \\u2B50\\uFE0F\",movie.imdbRating]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:movie.Actors}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm pb-6\",children:movie.Plot}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-6\",children:[movie&&/*#__PURE__*/_jsx(LinkButton,{to:\"/mylist\",className:\"text-black bg-yellow w-max font-bold border-2 border-solid border-yellow inline-block px-4 py-2\",onClick:()=>{addToWatchlist(movie);},children:\"Add to watch\"}),/*#__PURE__*/_jsx(LinkButton,{to:`/?query=${new URLSearchParams(window.location.search).get(\"query\")}`,className:\"text-white w-max font-bold border-2 border-solid border-white inline-block px-4 py-2\",children:\"Return back\"})]})]})]});}export default MovieDetailPage;","map":{"version":3,"names":["useParams","useEffect","useState","FaPlay","LinkButton","useWatchlist","jsx","_jsx","jsxs","_jsxs","KEY","MovieDetailPage","id","movie","setMovie","error","setError","isLoading","setIsLoading","addToWatchlist","controller","AbortController","fetchMovie","res","fetch","signal","ok","Error","data","json","Response","err","name","message","abort","children","className","src","Poster","alt","Title","size","Year","imdbRating","Actors","Plot","to","onClick","URLSearchParams","window","location","search","get"],"sources":["/Users/nataliia/Desktop/MoviesNight/movies-night/src/components/MovieDetail.jsx"],"sourcesContent":["import { useParams } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport { FaPlay } from \"react-icons/fa\";\nimport LinkButton from \"./LinkButton\";\nimport { useWatchlist } from \"../context/WatchlistContext\";\n\nconst KEY = \"ef5bebce\";\n\nfunction MovieDetailPage() {\n  const { id } = useParams();\n\n  const [movie, setMovie] = useState(null);\n\n  const [error, setError] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(true);\n  const { addToWatchlist } = useWatchlist();\n  useEffect(() => {\n    const controller = new AbortController();\n    async function fetchMovie() {\n      try {\n        setIsLoading(true);\n        setError(\"\");\n\n        const res = await fetch(\n          `http://www.omdbapi.com/?i=${id}&apikey=${KEY}`,\n          {\n            signal: controller.signal,\n          }\n        );\n\n        if (!res.ok)\n          throw new Error(\"Something went wrong with fetching movies\");\n\n        const data = await res.json();\n\n        if (data.Response === \"False\") throw new Error(data.Error);\n\n        setMovie(data);\n      } catch (err) {\n        if (err.name !== \"AbortError\") {\n          setError(err.message);\n        }\n      } finally {\n        setIsLoading(false);\n      }\n    }\n\n    fetchMovie();\n\n    return () => {\n      controller.abort();\n    };\n  }, [id]);\n\n  if (isLoading) return <p>Loading...</p>;\n  if (error) return <p>Error: {error}</p>;\n  if (!movie) return <p>Movie is loading...</p>;\n\n  return (\n    <div className=\"flex w-2/3 gap-4 text-white\">\n      <div className=\"relative w-[400px] h-[340px]\">\n        <img\n          src={movie.Poster}\n          alt={`${movie.Title} poster`}\n          className=\"w-full object-cover min-w-full min-h-full h-full\"\n        />\n        <button\n          className=\"absolute inset-0 flex items-center justify-center text-white opacity-0 hover:opacity-100 transition-opacity bg-black bg-opacity-50\"\n          aria-label=\"Play\"\n        >\n          <FaPlay size={30} />\n        </button>\n      </div>\n\n      <div className=\"flex flex-col gap-2\">\n        <h1 className=\"text-3xl text-yellow \">{movie.Title}</h1>\n        <div className=\"flex gap-4\">\n          <p className=\"font-bold text-xl pb-6\">üé¨ {movie.Year}</p>\n          {movie.imdbRating === \"N/A\" ? null : (\n            <p className=\"font-bold text-xl\"> ‚≠êÔ∏è{movie.imdbRating}</p>\n          )}\n        </div>\n        <p className=\"font-bold\">{movie.Actors}</p>\n\n        <p className=\"text-sm pb-6\">{movie.Plot}</p>\n        <div className=\"flex gap-6\">\n          {movie && (\n            <LinkButton\n              to=\"/mylist\"\n              className=\"text-black bg-yellow w-max font-bold border-2 border-solid border-yellow inline-block px-4 py-2\"\n              onClick={() => {\n                addToWatchlist(movie);\n              }}\n            >\n              Add to watch\n            </LinkButton>\n          )}\n          <LinkButton\n            to={`/?query=${new URLSearchParams(window.location.search).get(\n              \"query\"\n            )}`}\n            className=\"text-white w-max font-bold border-2 border-solid border-white inline-block px-4 py-2\"\n          >\n            Return back\n          </LinkButton>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default MovieDetailPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}